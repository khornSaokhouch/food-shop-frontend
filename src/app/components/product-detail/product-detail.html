<div class="min-h-[calc(100vh-64px)] py-12">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      
      <a 
          routerLink="" 
          class="mb-6 inline-flex items-center text-gray-600 hover:text-green-600 transition font-medium"
      >
          <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
          Back to Shop
      </a>

      <div *ngIf="product" class="bg-white rounded-xl shadow-2xl p-6 md:p-10">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">

              <div class="lg:sticky lg:top-20 self-start">
                  <img 
                      [src]="product.image || 'placeholder-image.png'" 
                      [alt]="product.name" 
                      class="w-full h-96 object-cover object-center rounded-lg shadow-xl border border-gray-100"
                  />
                  
                  <div class="mt-6 flex flex-wrap gap-4 text-sm text-gray-600 justify-center lg:justify-start">
                      <span class="flex items-center gap-2 font-medium">
                          <svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.21a2 2 0 010 2.834L10 17.234l-3.618-3.618a2 2 0 01-2.834-2.834l.707-.707a2 2 0 012.834 0L10 13.121l1.707-1.707a2 2 0 012.834 0z"></path></svg> 
                          100% Fresh
                      </span>
                      <span class="flex items-center gap-2 font-medium">
                          <svg class="w-5 h-5 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c1.657 0 3 .895 3 2s-1.343 2-3 2h-1v-4h1z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20v-2m4 0v2m0-10h1v4h-1zM4 14h16m-7 0a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> 
                          Local Source
                      </span>
                  </div>
              </div>

              <div>
                  <span class="inline-block bg-gray-100 text-gray-600 text-xs font-semibold px-3 py-1 rounded-full mb-3 uppercase">
                      {{ product.category }}
                  </span>
                  
                  <h1 class="text-4xl font-extrabold text-gray-900 mb-4">{{ product.name }}</h1>
                  
                  <div class="flex items-center mb-6 text-yellow-500">
                      <ng-container *ngFor="let star of [1,2,3,4,5]">
                          <svg *ngIf="product.rating && product.rating >= star" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049..."></path></svg>
                          <svg *ngIf="!product.rating || product.rating < star" class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049..."></path></svg>
                      </ng-container>
                      <span class="ml-2 text-sm text-gray-500 font-semibold">
                          ({{ averageRating() }}/5) | {{ reviews.length }} Reviews
                      </span>
                  </div>
                  
                  <div class="py-4 border-t border-b border-gray-100 mb-6">
                      <span class="text-4xl font-extrabold text-green-600">${{ product.price.toFixed(2) }}</span>
                      <span class="text-xl text-gray-500 ml-2 font-medium">/ unit</span>
                  </div>

                  <h2 class="text-xl font-semibold text-gray-800 mb-3">Product Details</h2>
                  <p class="text-gray-600 leading-relaxed mb-6">
                      {{ product.description || 'No detailed description available for this product.' }}
                  </p>

                  <div class="flex items-center space-x-4 mb-8">
                      
                      <div class="flex items-center border border-gray-300 rounded-full overflow-hidden">
                          <button 
                              (click)="changeQuantity(-1)" 
                              [disabled]="quantity === 1"
                              class="p-3 text-gray-600 hover:bg-gray-100 disabled:opacity-50 transition"
                          >
                              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg>
                          </button>
                          <span class="px-4 text-lg font-semibold">{{ quantity }}</span>
                          <button 
                              (click)="changeQuantity(1)"
                              [disabled]="quantity >= product.stock"
                              class="p-3 text-gray-600 hover:bg-gray-100 disabled:opacity-50 transition"
                          >
                              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                          </button>
                      </div>

                      <button 
                          (click)="addToCart()" 
                          [disabled]="product.stock === 0"
                          class="flex-1 bg-green-600 text-white font-bold py-3 rounded-full hover:bg-green-700 transition shadow-lg disabled:bg-gray-400"
                      >
                          {{ product.stock > 0 ? 'Add to Cart' : 'Out of Stock' }}
                      </button>
                  </div>

                  <div class="text-sm text-gray-700 space-y-2">
                      <p class="flex items-center gap-2 font-medium">
                          <svg class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                          <span [class.text-red-500]="product.stock < 10">{{ product.stock }} units available</span>
                      </p>
                  </div>

              </div>
          </div>

          <div class="mt-12 border-t pt-8 border-gray-100">
              <h2 class="text-2xl font-extrabold text-gray-900 mb-6">Customer Reviews</h2>
              
              <div *ngIf="reviews.length; else noReviews" class="space-y-6">
                  <div *ngFor="let review of reviews" class="border-b border-gray-100 pb-4 last:border-b-0">
                      <div class="flex justify-between items-center mb-1">
                          <span class="font-semibold text-gray-800">{{ review.user }}</span>
                          <span class="text-lg font-bold text-yellow-500">{{ review.rating }}/5</span>
                      </div>
                      <p class="text-gray-600 italic">"{{ review.comment }}"</p>
                      <p class="text-gray-400 text-xs mt-2">Reviewed on {{ review.date }}</p>
                  </div>
              </div>
              
              <ng-template #noReviews>
                  <p class="text-gray-500 p-4 bg-gray-50 rounded-lg">Be the first to review this delicious product!</p>
              </ng-template>
          </div>
          
      </div>
      
      <div *ngIf="!product" class="text-center p-12 bg-white rounded-xl shadow-lg">
          <h2 class="text-3xl font-bold text-red-500 mb-3">Product Not Found</h2>
          <p class="text-gray-600">The item you are looking for does not exist or may have been discontinued.</p>
      </div>

  </div>
</div>